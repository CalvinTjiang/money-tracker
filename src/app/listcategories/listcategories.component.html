<div class="header">
    <div class="add-button" (click)="addCategory()">
        <i class="material-icons md-orange">add</i>
        <a class="button-text">Add Category</a>
    </div>
</div>

<div class="section" *ngIf="section==0">
    <table class="table table-striped">
        <tr>
            <th>Name</th>
            <th>Super Category</th>

        </tr>
        <ng-container *ngFor="let item of categoriesDB">
            <tr class="item-row" (click)="editCategory(item)">
                <td>{{item.name}}</td>
                <td *ngIf="item.supercategory!=undefined">{{item.supercategory.name}}</td>
            </tr>
        </ng-container>
    </table>
</div>

<div class="section" *ngIf="section==1">
    <div class="form-group">
        <label for="name">Name</label>
        <input type="text" class="form-control" id="name" [(ngModel)]="category.name">
    </div>
    <div class="form-group">
        <label >Super Category</label>
        <select class="custom-select" [(ngModel)]="category.supercategory._id">
            <ng-container *ngFor="let category of categoriesDB">  
                <option *ngIf="category._id != category.supercategory._id" [ngValue]=category._id>{{category.name}}</option>
                <option *ngIf="category._id == category.supercategory._id" [ngValue]=category._id selected>{{category.name}}</option>
            </ng-container>
        </select>
    </div>
    <button type="submit" class="btn btn-success" (click)="updateCategory()">Update</button>
    <button type="submit" class="btn btn-danger" (click)="deleteCategory()">Delete</button>
</div>

<div class="section" *ngIf="section==2">
    <div class="form-group">
        <label for="name">Name</label>
        <input type="text" class="form-control" id="name" [(ngModel)]="category.name">
    </div>
    <div class="form-group">
        <label >Super Category</label>
        <select class="custom-select" [(ngModel)]="category.supercategory._id">
            <ng-container *ngFor="let supercategory of categoriesDB">  
                <option [ngValue]="supercategory._id">{{supercategory.name}}</option>
            </ng-container>
        </select>
    </div>
    <button type="submit" class="btn btn-orange" (click)="createCategory()">Create</button>
</div>